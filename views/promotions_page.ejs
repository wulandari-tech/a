<%- include('partials/header', { pageTitle: 'Promosi Spesial' }) %>

<div class="container py-md-5">
    <div class="text-center mb-5" data-aos="fade-up">
        <h1 class="display-5 fw-bold"><i class="fas fa-tags me-3 text-primary"></i>Promosi & Penawaran Spesial</h1>
        <p class="lead text-muted">Jangan lewatkan promo menarik dari <%= storeName %> dan para seller kami!</p>
    </div>

    <div class="row g-4">
        <% if (typeof promotions !== 'undefined' && Array.isArray(promotions) && promotions.length > 0) { %>
            <% promotions.forEach((promo, index) => { %>
                <div class="col-md-6 col-lg-4 d-flex align-items-stretch" data-aos="fade-up" data-aos-delay="<%= (index % 3) * 100 %>">
                    <div class="card shadow-sm promo-card h-100">
                        <% if (promo.imageUrl) { %>
                            <img src="<%= promo.imageUrl %>" class="card-img-top promo-image" alt="<%= promo.title %>">
                        <% } %>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title fw-bold text-primary"><%= promo.title %></h5>
                            <p class="card-text small text-muted flex-grow-1"><%= promo.description %></p>
                            <% if (promo.validUntil) { %>
                                <p class="card-text small text-danger">Berlaku hingga: <%= new Date(promo.validUntil).toLocaleDateString('id-ID', {day:'numeric', month:'long', year:'numeric'}) %></p>
                            <% } %>
                            <% if (promo.link) { %>
                                <a href="<%= promo.link %>" class="btn btn-sm btn-outline-primary mt-auto">Lihat Detail Promo</a>
                            <% } %>
                        </div>
                         <% if (promo.seller) { %>
                            <div class="card-footer bg-light text-muted small">
                                Diposting oleh: <%= promo.seller.username %>
                            </div>
                        <% } %>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <div class="col-12">
                <div class="alert alert-info text-center p-5">
                    <i class="fas fa-gift fa-3x mb-3"></i>
                    <h4 class="alert-heading">Belum Ada Promosi</h4>
                    <p>Saat ini belum ada promosi atau penawaran spesial. Silakan cek kembali nanti.</p>
                </div>
            </div>
        <% } %>
    </div>
</div>
<style>
    .promo-card .promo-image {
        height: 200px;
        object-fit: cover;
    }
</style>
<%- include('partials/footer') %>